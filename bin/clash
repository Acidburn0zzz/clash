#! /usr/bin/env ruby

$LOAD_PATH.unshift(File.expand_path("../lib", File.dirname(__FILE__)))

require 'clash'
require 'optparse'

options = {}

OptionParser.new do |opts|
  opts.banner = "Usage: clash [options]"

  opts.on("-f FILE", "--file FILE", "Set test file (default: .clash.yml).") do |f|
    options[:file] = f
  end

  opts.on("-o test[test, test]", "--only test[test, test]", Array, "Select which test number(s) to run.") do |o|
    options[:only] = o.map{ |n| n.to_i }
  end

  opts.on("--context NUMBER", Integer, "Number of lines of context on a diff") do |context|
    options[:context] = context
  end

end.parse!

Clash.test(options)
